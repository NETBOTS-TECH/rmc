(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4063],{61054:function(e,a,s){Promise.resolve().then(s.bind(s,25717))},25717:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return x}});var t=s(57437),i=s(2265),l=s(62869),r=s(95186),n=s(66070),c=s(76818),o=s(26110),d=s(99397),m=s(42208),g=s(15868),h=s(27413),u=s(24895);let p=s(40257).env.BASE_URL;function x(){let[e,a]=(0,i.useState)([]),[s,x]=(0,i.useState)(!1),[f,b]=(0,i.useState)(!1),[v,j]=(0,i.useState)(!1),[N,y]=(0,i.useState)(null),[w,S]=(0,i.useState)({_id:"",title:"",sections:[]}),[C,E]=(0,i.useState)(!1),[k,_]=(0,i.useState)("");(0,i.useEffect)(()=>{Z()},[]);let Z=async()=>{let e=await fetch("".concat(p,"/api/blogs"));a(await e.json())},z=e=>{S({...w,sections:w.sections.filter((a,s)=>s!==e)})},O=e=>{N&&y({...N,sections:N.sections.filter((a,s)=>s!==e)})},A=(e,a)=>{if(!e.target.files)return;let s=[...w.sections];s[a].image=e.target.files[0],S({...w,sections:s})},B=(e,a,s)=>{let t=[...w.sections];t[e][a]=s,S({...w,sections:t})},I=async()=>{E(!0);let e=new FormData;e.append("title",w.title);let a=w.sections.map((e,a)=>({heading:e.heading,paragraph:e.paragraph,image:e.image instanceof File?"NEW_IMAGE_".concat(a):e.image}));e.append("sections",JSON.stringify(a)),w.sections.forEach((a,s)=>{a.image instanceof File&&e.append("images",a.image)});try{if(!(await fetch("".concat(p,"/api/blogs"),{method:"POST",body:e})).ok)throw Error("Failed to create blog");x(!1),Z(),(0,u.A)({title:"Success",description:"blog added successfully"}),E(!1)}catch(e){console.error("Error submitting blog:",e),(0,u.A)({title:"errpr",description:"blog creation failed"}),E(!1)}},F=async e=>{_(e),await fetch("".concat(p,"/api/blogs/").concat(e),{method:"DELETE"}),Z(),(0,u.A)({title:"Success",description:"Blog deleted successfully"}),_("")},U=async()=>{if(!N)return;E(!0);let e=new FormData;e.append("title",N.title);let a=N.sections.map((e,a)=>({heading:e.heading,paragraph:e.paragraph,image:e.image instanceof File?"NEW_IMAGE_".concat(a):e.image}));e.append("sections",JSON.stringify(a)),N.sections.forEach((a,s)=>{a.image instanceof File&&e.append("images",a.image)});try{if(!(await fetch("".concat(p,"/api/blogs/").concat(N._id),{method:"PUT",body:e})).ok)throw Error("Failed to update blog");j(!1),Z(),(0,u.A)({title:"Success",description:"Blog updated successfully"}),E(!1)}catch(e){console.error("Error updating blog:",e),(0,u.A)({title:"error",description:"Blog updation failed"}),E(!1)}};return(0,i.useEffect)(()=>{s&&S({_id:"",title:"",sections:[]})},[s]),(0,i.useEffect)(()=>{v||y(e=>e?{...e,sections:e.sections.map(e=>({...e,image:e.image instanceof File?null:e.image}))}:null)},[v]),(0,t.jsxs)("div",{className:"p-6 bg-gray-50",children:[(0,t.jsxs)(l.z,{onClick:()=>x(!0),className:"mb-6 flex items-center bg-primary hover:bg-primary/90 shadow-sm",children:[(0,t.jsx)(d.Z,{className:"mr-2 h-4 w-4"})," Create Blog"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,a)=>{var s,i,r,c,o;return(0,t.jsxs)(n.Zb,{className:"hover:shadow-md transition-shadow duration-300 overflow-hidden",children:[(null===(s=e.sections[0])||void 0===s?void 0:s.image)&&(0,t.jsx)("div",{className:"h-40 overflow-hidden",children:(0,t.jsx)("img",{src:String(e.sections[0].image),alt:"",className:"w-full h-full object-cover"})}),(0,t.jsx)(n.Ol,{className:"pb-2",children:(0,t.jsx)(n.ll,{className:"text-lg font-bold truncate",children:e.title})}),(0,t.jsxs)(n.aY,{className:"pt-0",children:[(0,t.jsxs)("p",{className:"text-gray-500 text-sm mb-4 line-clamp-2",children:[(null===(r=e.sections[0])||void 0===r?void 0:null===(i=r.paragraph)||void 0===i?void 0:i.substring(0,100))||"No content",(null===(o=e.sections[0])||void 0===o?void 0:null===(c=o.paragraph)||void 0===c?void 0:c.length)>100?"...":""]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(l.z,{variant:"outline",onClick:()=>{y(e),b(!0)},className:"flex-1 text-xs",children:[(0,t.jsx)(m.Z,{className:"w-4 h-4 mr-1"})," View"]}),(0,t.jsxs)(l.z,{variant:"outline",onClick:()=>{y(e),j(!0)},className:"flex-1 text-xs",children:[(0,t.jsx)(g.Z,{className:"w-4 h-4 mr-1"})," Edit"]}),(0,t.jsx)(l.z,{variant:"outline",onClick:()=>F(e._id),className:"text-red-500 hover:bg-red-50 text-xs",children:e._id===k?"Deleting...":(0,t.jsx)(h.Z,{className:"w-4 h-4"})})]})]})]},e._id)})}),(0,t.jsx)(o.Vq,{open:s,onOpenChange:x,children:(0,t.jsxs)(o.cZ,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsx)(o.fK,{className:"border-b pb-4 mb-4",children:(0,t.jsx)(o.$N,{className:"text-xl font-bold",children:"Create Blog"})}),(0,t.jsx)(r.I,{value:w.title,onChange:e=>S({...w,title:e.target.value}),placeholder:"Title",className:"mb-6 border-gray-300 focus:border-primary focus:ring-1 focus:ring-primary"}),(0,t.jsx)("div",{className:"space-y-6",children:w.sections.map((e,a)=>(0,t.jsxs)("div",{className:"p-4 border rounded-md bg-gray-50 space-y-3",children:[(0,t.jsxs)(l.z,{variant:"destructive",onClick:()=>z(a),className:" text-xs float-right",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4"})," Delete"]}),(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-500 mb-1",children:["Section ",a+1]}),(0,t.jsx)(r.I,{value:e.heading||"",onChange:e=>B(a,"heading",e.target.value),placeholder:"Heading",className:"mb-2 border-gray-300"}),(0,t.jsx)(c.g,{value:e.paragraph||"",onChange:e=>B(a,"paragraph",e.target.value),placeholder:"Paragraph",className:"min-h-24 border-gray-300"}),(0,t.jsxs)("div",{className:"bg-white p-3 rounded border border-gray-200",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Section Image"}),e.image&&(0,t.jsx)("div",{className:"mb-2 h-24 w-full rounded overflow-hidden bg-gray-100",children:(0,t.jsx)("img",{src:"string"==typeof e.image?e.image:URL.createObjectURL(e.image),alt:"",className:"h-full w-full object-cover"})}),(0,t.jsx)(r.I,{type:"file",onChange:e=>A(e,a),className:"text-sm"})]})]},a))}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-6 pt-4 border-t",children:[(0,t.jsxs)(l.z,{onClick:()=>{S({...w,sections:[...w.sections,{heading:"",paragraph:"",image:null}]})},variant:"outline",className:"flex items-center",children:[(0,t.jsx)(d.Z,{className:"mr-2 h-4 w-4"})," Add Section"]}),(0,t.jsx)(l.z,{onClick:I,className:"bg-primary hover:bg-primary/90",children:C?"Saving.....":"Save Blog"})]})]})}),N&&(0,t.jsx)(o.Vq,{open:f,onOpenChange:b,children:(0,t.jsxs)(o.cZ,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsx)(o.fK,{className:"border-b pb-4 mb-6",children:(0,t.jsx)(o.$N,{className:"text-2xl font-bold",children:N.title})}),(0,t.jsx)("div",{className:"space-y-8",children:N.sections.map((e,a)=>(0,t.jsxs)("div",{className:"mb-6",children:[e.heading&&(0,t.jsx)("h3",{className:"font-bold text-xl mb-3 text-gray-800",children:e.heading}),e.image&&(0,t.jsx)("div",{className:"rounded-md overflow-hidden mb-4 shadow-sm",children:(0,t.jsx)("img",{src:String(e.image),alt:"",className:"w-full object-cover"})}),e.paragraph&&(0,t.jsx)("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:e.paragraph})]},a))})]})}),N&&(0,t.jsx)(o.Vq,{open:v,onOpenChange:j,children:(0,t.jsxs)(o.cZ,{className:"max-w-2xl max-h-[80vh] overflow-auto",children:[(0,t.jsx)(o.fK,{className:"border-b pb-4 mb-4",children:(0,t.jsx)(o.$N,{className:"text-xl font-bold",children:"Edit Blog"})}),(0,t.jsx)(r.I,{value:(null==N?void 0:N.title)||"",onChange:e=>y({...N,title:e.target.value}),placeholder:"Title",className:"mb-6 border-gray-300 focus:border-primary focus:ring-1 focus:ring-primary"}),(0,t.jsx)("div",{className:"space-y-6",children:null==N?void 0:N.sections.map((e,a)=>(0,t.jsxs)("div",{className:"p-4 border rounded-md bg-gray-50 space-y-3",children:[(0,t.jsxs)(l.z,{variant:"destructive",onClick:()=>O(a),className:" text-xs float-right",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4"})," Delete"]}),(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-500 mb-1",children:["Section ",a+1]}),(0,t.jsx)(r.I,{value:e.heading||"",onChange:e=>{let s=[...N.sections];s[a].heading=e.target.value,y({...N,sections:s})},placeholder:"Heading",className:"mb-2 border-gray-300"}),(0,t.jsx)(c.g,{value:e.paragraph||"",onChange:e=>{let s=[...N.sections];s[a].paragraph=e.target.value,y({...N,sections:s})},placeholder:"Paragraph",className:"min-h-24 border-gray-300"}),(0,t.jsxs)("div",{className:"bg-white p-3 rounded border border-gray-200",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Section Image"}),e.image&&(0,t.jsx)("div",{className:"mb-2 h-24 w-full rounded overflow-hidden bg-gray-100",children:(0,t.jsx)("img",{src:"string"==typeof e.image?e.image:URL.createObjectURL(e.image),alt:"Blog Section",className:"h-full w-full object-cover"})}),(0,t.jsx)(r.I,{type:"file",onChange:e=>{if(!e.target.files)return;let s=e.target.files[0];y(e=>e?{...e,sections:e.sections.map((e,t)=>t===a?{...e,image:s}:e)}:null)},className:"text-sm"})]})]},a))}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-6 pt-4 border-t",children:[(0,t.jsxs)(l.z,{onClick:()=>{N&&y({...N,sections:[...N.sections||[],{heading:"",paragraph:"",image:null}]})},variant:"outline",className:"flex items-center",children:[(0,t.jsx)(d.Z,{className:"mr-2 h-4 w-4"})," Add Section"]}),(0,t.jsx)(l.z,{onClick:()=>U(),className:"bg-primary hover:bg-primary/90",children:C?"Updating....":"Update Blog"})]})]})})]})}},76818:function(e,a,s){"use strict";s.d(a,{g:function(){return r}});var t=s(57437),i=s(2265),l=s(94508);let r=i.forwardRef((e,a)=>{let{className:s,...i}=e;return(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...i})});r.displayName="Textarea"},42208:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(79205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},99397:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(79205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},function(e){e.O(0,[5569,7514,9027,1273,2971,2117,1744],function(){return e(e.s=61054)}),_N_E=e.O()}]);